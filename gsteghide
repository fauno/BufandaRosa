#!/bin/bash
#
#	Cifrado de mensaje en un archivo de imagen o audio
#

menu=` zenity --title "Estenografiame" --text "Â¿Que queres hacer?" --list --column "" --hide-header "cifrar" "descrifrar" `
if [ "$menu" = "cifrar" ]; then
	b=`zenity --title "Elige una imagen para contener el mensaje" --file-selection --file-filter='Imagen o Audio | *.jpg *.bmp *.wav *.au'`
	if [ "$b" ]; then
		p=`zenity --title "Clave" --text "Introduce la clave" --entry`
		zenity --title "Mensaje" --text="introduce el mensaje" --entry | steghide embed -ef - -p "$p" -cf "$b"
	fi
else
	sf=`zenity --title "elije el archivo con el archivo oculto" --file-selection `
	p=`zenity --title "Clave" --text "Introduce la clave" --entry`
	steghide extract -p "$p" -sf "$sf" -xf - | zenity --text-info
fi

exit

# Quehaceres

- restringir extensiones de entrada
- opcion de entrada como URL
- opcion de publicacion
- opcion para cifrar otro tipo de archivos, que no sean textos
