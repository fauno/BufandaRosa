#!/bin/bash
#
#	Mensaje cifrado dentro de un archivo de audio o imagen
#

# cifrado o descifrado
menu=`zenity --title "Estenografiame" --text "Â¿Que queres hacer?" --list --column "" --hide-header "cifrar" "descrifrar"`
if [ "$menu" == "cifrar" ]; then
	# --- cifrado ---
	# archivo
	b=`zenity --title "Elige una imagen para contener el mensaje" --file-selection --file-filter='Imagen o Audio | *.jpg *.bmp *.wav *.au'` || exit
	# clave
	p=`zenity --title "Clave" --text "Introduce la clave" --entry`
	# introduccion del mensaje
	zenity --title "Mensaje" --text="introduce el mensaje" --entry | steghide embed -ef - -p "$p" -cf "$b"
else
	# --- descifrado ---
	# archivo
	sf=`zenity --title "elije el archivo con el archivo oculto" --file-selection ` || exit
	# clave
	p=`zenity --title "Clave" --text "Introduce la clave" --entry`
	# mensaje descifrado
	steghide extract -p "$p" -sf "$sf" -xf - | zenity --text-info
fi

exit

# Quehaceres

- restringir extensiones de entrada
- opcion de entrada como URL
- opcion de publicacion
- opcion para cifrar otro tipo de archivos, que no sean textos
