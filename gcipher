#!/bin/bash
#
#	con en bash de gcipher pero mas efectivo
#

menu=` zenity --title "Mensajes cifrados" --text "Â¿Que queres hacer?" --list --column "" --hide-header "cifrar" "descrifrar" ` || exit

# clave
k=`zenity --title "Clave" --text "Introduce la clave" --entry`

# introduce el texto
texto=`zenity --text-info --editable --cancel-label=$men`

# verifica tener texto
if [ ! "$texto" = "" ]; then
	if [ "$menu" = "cifrar" ]; then
		# cifrado
		m=`echo "texto" | mcrypt - -k "$k" -F | base64 -w0`
		# lo guarda en la papelera
		echo $m | xsel -b
	else
		# descifrado
		m=`echo "texto" | base64 -d | mdecrypt - -k "$k" -F `
	fi
fi

# pesenta el mensaje
echo $m | zenity --text-info

exit

# Quehaceres

- restringir extensiones de entrada
- opcion de entrada como URL
- opcion de publicacion
- opcion para cifrar otro tipo de archivos, que no sean textos
